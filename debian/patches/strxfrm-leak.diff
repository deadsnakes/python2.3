From: Felix Krull <f_krull@gmx.de>
Date: Fri, 27 Apr 2018 07:43:51 -0700
Subject: strxfrm-leak

# DP: Fix off-by-one bug in strxfrm()
---
 Modules/_localemodule.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Modules/_localemodule.c b/Modules/_localemodule.c
index 363a823..576190e 100644
--- a/Modules/_localemodule.c
+++ b/Modules/_localemodule.c
@@ -399,7 +399,7 @@ PyLocale_strxfrm(PyObject* self, PyObject* args)
     buf = PyMem_Malloc(n1);
     if (!buf)
         return PyErr_NoMemory();
-    n2 = strxfrm(buf, s, n1);
+    n2 = strxfrm(buf, s, n1) + 1;
     if (n2 > n1) {
         /* more space needed */
         buf = PyMem_Realloc(buf, n2);
